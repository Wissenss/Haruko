<!DOCTYPE html>
<html>
  
  <head>
    <title>Haruko - {{list.name}}</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/shared.css') }}"/>
  </head>

  <body>
    <a href="{{ url_for('list_index')}}">[List Index]</a>

    <h1>{{list.name}}</h1>

    <ol>
      {% for item in list_items %}
        {% if item.is_archived == false %}
          <li><a href="{{ url_for('list_item_detail', list_id=list.id, id=item.id) }}">{{ item.content }} ({{ item.score }})</a></li>
        {% endif %}
      {% endfor %}
    </ol>

    <a href="{{ url_for('list_item_random', list_id=list.id)}}">[Random]</a>
    <a href="{{ url_for('list_detail_export', list_id=list.id)}}">[Export]</a>

    <h3>Archived</h3>

    <ul>
      {% for item in list_items %}
        {% if item.is_archived == true %}
          <li>
            [
            <time class="utc-date" datetime="{{ item.archived_at }}Z">
              {{ item.archived_at }}
            </time>
            ]
            <i>{{ item.content }}</i>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </body>

  <script>
    document.querySelectorAll("time.utc-date").forEach(el => {
      const date = new Date(el.dateTime);

      if (isNaN(date)) return;

      el.textContent = new Intl.DateTimeFormat(undefined, {
        dateStyle: "medium",
        timeStyle: "short"
      }).format(date);
    });
  </script>

</html>